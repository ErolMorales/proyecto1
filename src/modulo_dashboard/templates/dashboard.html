{% extends "base.html" %}

{% block scripts %}
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
{% endblock %}
{% block contenido %}

    <h2>Horarios</h2>
    <ul>
        {% for item in items %}

            <li>{{ item.dia }} - {{ item.horario_inicio }} a {{ item.horario_fin }}</li>
        {% endfor %}
    </ul>

    <div id="map" style="height: 400px; width: 100%"></div>
    <button id="showLocationButton">Mostrar Ubicación</button>
    <script>
        var map = L.map('map').setView([15.4844, -90.3770], 13);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);

        // Función para manejar el clic en el mapa
        function onMapClick(e) {
            // Obtiene las coordenadas donde se hizo clic
            var lat = e.latlng.lat;
            var lng = e.latlng.lng;

            // Crea un marcador en esa ubicación
            L.marker([lat, lng]).addTo(map);
        }

        // Agrega un evento de clic al mapa
        map.on('click', onMapClick);

        // Función para mostrar la ubicación actual
        document.getElementById('showLocationButton').addEventListener('click', function() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    var lat = position.coords.latitude;
                    var lng = position.coords.longitude;

                    alert('Ubicación actual:\nLatitud: ' + lat + '\nLongitud: ' + lng);
                }, function(error) {
                    alert('Error al obtener la ubicación: ' + error.message);
                });
            } else {
                alert('Geolocalización no es compatible en este navegador.');
            }
        });
    </script>
{% endblock contenido %}

